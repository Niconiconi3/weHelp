<!DOCTYPE html>

<html>
<head>
    <title id="register"></title>
    <meta http-equiv="content-type" content="text/html" charset="utf-8">
    <meta name="author" content="niconiconi-nju" >

    <script>

        function checkUsername() {
            var username = document.getElementById("username").value;
            var reg = /^(?!_)(?!.*?_$)[a-zA-Z0-9_\u4e00-\u9fa5]+$/;
            if (!reg.test(username)) {
                alert("昵称包含非法字符。支持中文、英文、数字、“_”");
                return false;
            }
            else if (username.length > 14) {
                alert("昵称长度不符。请输入14位以内中文、英文、数字、“_”");
                return false;
            }
            else {
                return true;
            }
        }

        function checkStudentId() {                                                  //如果可以导入教务网数据验证学号更好
            var length = document.getElementById("studentid").value.length;
            if (length!=9) {
                alert("请输入正确的学号");
                return false;
            }
            else {
                if (isNaN(document.getElementById("studentid").value)) {
                    alert("请输入正确的学号");
                    return false;
                }
                else {
                    return true;
                }
            }
        }

        function check() {
            if (!checkUsername()) return false;
            if (!checkStudentId()) return false;                            //后台应验证学号是否被注册过
            return true;
        }
    </script>
</head>

<body>

    <div class="total-field">

    <h1 class="welcome-words-field">
        欢迎加入我们
    </h1>
    <form name="register" action="?" method="post" onsubmit="return check();">
        <ul>
            <li class="form-list">
                <span>昵称</span>
                <input id="username" type="text" name="username" onchange="checkUsername()" />
            </li>
            <li class="form-list">
                <span>学号</span>
                <input id="studentid" type="text" name="studentid" onchange="checkStudentId()" />
            </li>
            <li class="form-list">
                <input type="submit" value="join us" />
            </li>
        </ul>

    </form>

    </div>
</body>

</html>